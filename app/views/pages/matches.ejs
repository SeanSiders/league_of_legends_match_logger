<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='utf-8'>
    <title>Matches</title>
    <link rel='stylesheet' href='/css/style.css' type='text/css'/>
</head>

<header>
    <h1>League of Legends Matches</h1>
    <%- include('../components/nav_bar'); %>
</header>

<body>
    <br>
    <a href='create_match'><h3>Create a Match</h3></a>
    <br>

    <table class='dataViewTable'>
        <tr>
            <th>Team</th>
            <th>Won Game</th>
            <th>Total Gold</th>
            <th>Champion #1</th>
            <th>Champion #2</th>
            <th>Champion #3</th>
            <th>Champion #4</th>
            <th>Champion #5</th>
            <th>Match Duration (s)</th>
        </tr>
        <% matches.forEach((match) => { %>
            <tr>
                <td>Red</td>
                <% if (match.winning_team == 'red') { %>
                    <td><input type='radio' onclick='return false;' checked></td>
                <% } else { %>
                    <td><input type='radio' onclick='return false;'></td>
                <% } %>
                <td><%=match.red_team.total_gold_earned%></td>
                <% match.red_team.played_champions.forEach((champion) => { %>
                    <% if (champion) { %>
                        <td><%=champion.champion_name%></td>
                    <% } else { %>
                        <td></td>
                    <% } %>
                <% }) %>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <% match.red_team.played_champions.forEach((champion) => { %>
                    <% if (champion) { %>
                        <td><%=champion.summoner_name%></td>
                    <% } else { %>
                        <td></td>
                    <% } %>
                <% }) %>
                <td></td>
            </tr>

            <tr>
                <td>Blue</td>
                <% if (match.winning_team == 'blue') { %>
                    <td><input type='radio' onclick='return false;' checked></td>
                <% } else { %>
                    <td><input type='radio' onclick='return false;'></td>
                <% } %>
                <td><%=match.blue_team.total_gold_earned%></td>
                <% match.blue_team.played_champions.forEach((champion) => { %>
                    <% if (champion) { %>
                        <td><%=champion.champion_name%></td>
                    <% } else { %>
                        <td></td>
                    <% } %>
                <% }) %>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <% match.blue_team.played_champions.forEach((champion) => { %>
                    <% if (champion) { %>
                        <td><%=champion.summoner_name%></td>
                    <% } else { %>
                        <td></td>
                    <% } %>
                <% }) %>
                <td></td>
            </tr>

            <!-- TODO: spacing of match entries through CSS -->
            <tr>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td><%=match.match_duration_seconds%></td>
                <td><a href="/edit_match/?id_match=<%=match.id_match%>">View/Edit</a></td>
                <td><a href="/matches/delete/?id_match=<%=match.id_match%>">Delete</a></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        <% }) %>
    </table>
</body>

<footer>
    <h3>By Jeremy Steele and Sean Siders for CS 340</h3>
</footer>

</html>